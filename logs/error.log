2025-07-31T17:29:46.785Z [ERROR] Error en getDashboard: {"message":"Table 'sistema_stock.transferencias' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"\n                    SELECT COUNT(*) as count \n                    FROM transferencias \n                    WHERE estado IN ('PENDIENTE', 'PARCIAL')\n                ","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.transferencias' doesn't exist"}
2025-07-31T18:18:10.573Z [ERROR] Error en getDashboard: {"message":"Unknown column 'm.stock_minimo' in 'having clause'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    SELECT COUNT(DISTINCT m.id) as count\n                    FROM mercaderias m\n                    LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                    WHERE m.activo = 1 \n                    AND m.stock_minimo > 0\n                    GROUP BY m.id\n                    HAVING COALESCE(SUM(sd.cantidad), 0) <= m.stock_minimo\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'm.stock_minimo' in 'having clause'"}
2025-07-31T18:19:49.159Z [ERROR] Error en getDashboard: {"message":"Unknown column 'm.stock_minimo' in 'having clause'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    SELECT COUNT(DISTINCT m.id) as count\n                    FROM mercaderias m\n                    LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                    WHERE m.activo = 1 \n                    AND m.stock_minimo > 0\n                    GROUP BY m.id\n                    HAVING COALESCE(SUM(sd.cantidad), 0) <= m.stock_minimo\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'm.stock_minimo' in 'having clause'"}
2025-07-31T18:20:38.302Z [ERROR] Error en getDashboard: {"message":"Unknown column 'm.stock_minimo' in 'having clause'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    SELECT COUNT(DISTINCT m.id) as count\n                    FROM mercaderias m\n                    LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                    WHERE m.activo = 1 \n                    AND m.stock_minimo > 0\n                    GROUP BY m.id\n                    HAVING COALESCE(SUM(sd.cantidad), 0) <= m.stock_minimo\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'm.stock_minimo' in 'having clause'"}
2025-07-31T18:32:10.665Z [ERROR] Error en getDashboard: {"message":"Table 'sistema_stock.transferencias' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"\n                    SELECT COUNT(*) as count \n                    FROM transferencias \n                    WHERE estado IN ('PENDIENTE', 'PARCIAL')\n                ","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.transferencias' doesn't exist"}
2025-07-31T19:20:46.016Z [ERROR] Error en generarEtiqueta: {}
2025-08-01T03:07:42.600Z [ERROR] Error en generarEtiqueta: {}
2025-08-02T20:34:36.097Z [ERROR] Error en getStock vendedor: {"message":"Unknown column 'sd.cantidad_reservada' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id as mercaderia_id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    sd.cantidad,\n                    sd.cantidad_reservada,\n                    sd.cantidad_disponible,\n                    d.nombre as deposito_nombre,\n                    c.nombre as categoria,\n                    CASE \n                        WHEN sd.cantidad <= m.stock_minimo THEN 'BAJO'\n                        WHEN sd.cantidad = 0 THEN 'SIN_STOCK'\n                        ELSE 'NORMAL'\n                    END as estado_stock\n                FROM stock_depositos sd\n                INNER JOIN depositos d ON sd.deposito_id = d.id\n                INNER JOIN mercaderias m ON sd.mercaderia_id = m.id\n                LEFT JOIN categorias c ON m.categoria_id = c.id\n                WHERE d.entity_id = ? AND d.tipo = \"VENDEDOR\" AND d.activo = 1\n                ORDER BY m.descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'sd.cantidad_reservada' in 'field list'"}
2025-08-02T20:34:48.884Z [ERROR] Error en getStock vendedor: {"message":"Unknown column 'sd.cantidad_reservada' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id as mercaderia_id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    sd.cantidad,\n                    sd.cantidad_reservada,\n                    sd.cantidad_disponible,\n                    d.nombre as deposito_nombre,\n                    c.nombre as categoria,\n                    CASE \n                        WHEN sd.cantidad <= m.stock_minimo THEN 'BAJO'\n                        WHEN sd.cantidad = 0 THEN 'SIN_STOCK'\n                        ELSE 'NORMAL'\n                    END as estado_stock\n                FROM stock_depositos sd\n                INNER JOIN depositos d ON sd.deposito_id = d.id\n                INNER JOIN mercaderias m ON sd.mercaderia_id = m.id\n                LEFT JOIN categorias c ON m.categoria_id = c.id\n                WHERE d.entity_id = ? AND d.tipo = \"VENDEDOR\" AND d.activo = 1\n                ORDER BY m.descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'sd.cantidad_reservada' in 'field list'"}
2025-08-02T23:28:22.293Z [ERROR] Error en index clientes: {"message":"Table 'sistema_stock.pedidos' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"\n                SELECT \n                    c.*,\n                    v.razonSocial as vendedor_nombre,\n                    v.email as vendedor_email,\n                    z.zona as zona_nombre,\n                    d.id as deposito_id,\n                    d.nombre as deposito_nombre,\n                    d.activo as deposito_activo,\n                    (SELECT COUNT(*) FROM stock_depositos sd \n                     INNER JOIN depositos dep ON sd.deposito_id = dep.id \n                     WHERE dep.tipo = 'CLIENTE' AND dep.entity_id = c.clienteId AND sd.cantidad > 0) as items_stock,\n                    (SELECT SUM(sd.cantidad) FROM stock_depositos sd \n                     INNER JOIN depositos dep ON sd.deposito_id = dep.id \n                     WHERE dep.tipo = 'CLIENTE' AND dep.entity_id = c.clienteId) as total_stock,\n                    (SELECT COUNT(*) FROM pedidos p \n                     WHERE p.clienteId = c.clienteId AND p.estado IN ('PENDIENTE', 'PROCESANDO')) as pedidos_pendientes\n                FROM clientes c\n                LEFT JOIN vendedores v ON c.vendedorId = v.vendedorId\n                LEFT JOIN zonas z ON c.zonaId = z.zonaId\n                LEFT JOIN depositos d ON c.clienteId = d.entity_id AND d.tipo = 'CLIENTE' AND d.activo = 1\n                WHERE 1=1\n                ORDER BY c.razonSocial\n            ","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.pedidos' doesn't exist"}
2025-08-02T23:30:49.442Z [ERROR] Error en index clientes: {"message":"Table 'sistema_stock.pedidos' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"\n                SELECT \n                    c.*,\n                    v.razonSocial as vendedor_nombre,\n                    v.email as vendedor_email,\n                    z.zona as zona_nombre,\n                    d.id as deposito_id,\n                    d.nombre as deposito_nombre,\n                    d.activo as deposito_activo,\n                    (SELECT COUNT(*) FROM stock_depositos sd \n                     INNER JOIN depositos dep ON sd.deposito_id = dep.id \n                     WHERE dep.tipo = 'CLIENTE' AND dep.entity_id = c.clienteId AND sd.cantidad > 0) as items_stock,\n                    (SELECT SUM(sd.cantidad) FROM stock_depositos sd \n                     INNER JOIN depositos dep ON sd.deposito_id = dep.id \n                     WHERE dep.tipo = 'CLIENTE' AND dep.entity_id = c.clienteId) as total_stock,\n                    (SELECT COUNT(*) FROM pedidos p \n                     WHERE p.clienteId = c.clienteId AND p.estado IN ('PENDIENTE', 'PROCESANDO')) as pedidos_pendientes\n                FROM clientes c\n                LEFT JOIN vendedores v ON c.vendedorId = v.vendedorId\n                LEFT JOIN zonas z ON c.zonaId = z.zonaId\n                LEFT JOIN depositos d ON c.clienteId = d.entity_id AND d.tipo = 'CLIENTE' AND d.activo = 1\n                WHERE 1=1\n                ORDER BY c.razonSocial\n            ","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.pedidos' doesn't exist"}
2025-08-02T23:35:35.791Z [ERROR] Error en getStock cliente: {"message":"Unknown column 'm.categoria_id' in 'on clause'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    sd.*,\n                    m.descripcion as mercaderia_descripcion,\n                    m.codigo_sku,\n                    m.precio_venta,\n                    c.descripcion as categoria_descripcion,\n                    d.nombre as deposito_nombre\n                FROM stock_depositos sd\n                INNER JOIN depositos d ON sd.deposito_id = d.id\n                INNER JOIN mercaderias m ON sd.mercaderia_id = m.id\n                LEFT JOIN categorias c ON m.categoria_id = c.id\n                WHERE d.entity_id = ? AND d.tipo = \"CLIENTE\" AND d.activo = 1\n                ORDER BY m.descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'm.categoria_id' in 'on clause'"}
2025-08-03T01:46:35.142Z [ERROR] Error en update vendedor: {}
2025-08-03T01:48:49.843Z [ERROR] Error en update vendedor: {}
2025-08-03T01:49:58.513Z [ERROR] Error en update vendedor: {}
2025-08-04T20:56:03.066Z [ERROR] Error en getDashboard: {"message":"read ECONNRESET","code":"ECONNRESET","errno":-4077}
2025-08-04T20:56:03.104Z [ERROR] Error en index categorías: {"message":"read ECONNRESET","code":"ECONNRESET","errno":-4077}
2025-08-04T20:56:03.220Z [ERROR] Error en findWithFilters: {"message":"","code":"ECONNREFUSED"}
2025-08-04T20:56:03.221Z [ERROR] Error en index: {"message":"","code":"ECONNREFUSED"}
2025-08-04T20:56:04.178Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-04T20:56:25.773Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-04T20:57:35.612Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-04T20:57:35.647Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-04T20:59:49.573Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-04T20:59:49.675Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-04T21:07:32.134Z [ERROR] Error en index proveedores: {}
2025-08-04T21:08:54.249Z [ERROR] Error en index proveedores: {}
2025-08-04T21:24:52.234Z [ERROR] Error en index vendedores: {"message":"connect ETIMEDOUT","code":"ETIMEDOUT"}
2025-08-04T22:20:53.290Z [ERROR] Error obteniendo estadísticas del proveedor: {"message":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"\n                SELECT \n                    COUNT(*) as total_compras,\n                    COALESCE(SUM(cantidad * precio_unitario), 0) as monto_total_compras,\n                    COALESCE(AVG(cantidad * precio_unitario), 0) as promedio_compra,\n                    MIN(fecha_movimiento) as primera_compra,\n                    MAX(fecha_movimiento) as ultima_compra\n                FROM movimientos_mercaderias \n                WHERE proveedor_id = ? AND tipo_movimiento = 'COMPRA' \n            ","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist"}
2025-08-05T00:20:20.733Z [ERROR] Error en create proveedor: {"message":"Duplicate entry '20200745540' for key 'cuit'","code":"ER_DUP_ENTRY","errno":1062,"sql":"INSERT INTO proveedores (razonSocial, cuit, telefono, email, domicilio, activo) \n                 VALUES (?, ?, ?, ?, ?, ?)","sqlState":"23000","sqlMessage":"Duplicate entry '20200745540' for key 'cuit'"}
2025-08-05T00:20:24.023Z [ERROR] Error en create proveedor: {"message":"Duplicate entry '20200745540' for key 'cuit'","code":"ER_DUP_ENTRY","errno":1062,"sql":"INSERT INTO proveedores (razonSocial, cuit, telefono, email, domicilio, activo) \n                 VALUES (?, ?, ?, ?, ?, ?)","sqlState":"23000","sqlMessage":"Duplicate entry '20200745540' for key 'cuit'"}
2025-08-05T03:07:47.550Z [ERROR] Error en getRecepciones: {"message":"Unknown column 'rm.total' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    rm.id,\n                    rm.numero_recepcion,\n                    rm.proveedor_id,\n                    p.razonSocial as proveedor_nombre,\n                    rm.fecha_recepcion,\n                    rm.numero_remito,\n                    rm.numero_factura,\n                    rm.total,\n                    rm.observaciones,\n                    rm.created_at,\n                    COUNT(dr.id) as total_items\n                FROM recepciones_mercaderia rm\n                LEFT JOIN proveedores p ON rm.proveedor_id = p.proveedorId\n                LEFT JOIN detalle_recepciones dr ON rm.id = dr.recepcion_id\n                WHERE 1=1\n                GROUP BY rm.id\n                ORDER BY rm.fecha_recepcion DESC\n                LIMIT ? OFFSET ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'rm.total' in 'field list'"}
2025-08-05T12:26:28.426Z [ERROR] Error en crearRecepcion: {"message":"Cannot add or update a child row: a foreign key constraint fails (`sistema_stock`.`lotes_mercaderia`, CONSTRAINT `lotes_mercaderia_ibfk_2` FOREIGN KEY (`proveedor_id`) REFERENCES `proveedores` (`proveedorId`))","code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sql":"\n                        INSERT INTO lotes_mercaderia (\n                            mercaderia_id, numero_lote, cantidad_inicial, cantidad_actual,\n                            fecha_vencimiento, precio_costo\n                        ) VALUES (50, 'AUTO-20250805-016', 3, 3, NULL, 0.01)\n                    ","sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`sistema_stock`.`lotes_mercaderia`, CONSTRAINT `lotes_mercaderia_ibfk_2` FOREIGN KEY (`proveedor_id`) REFERENCES `proveedores` (`proveedorId`))"}
2025-08-05T12:46:52.602Z [ERROR] Error en crearRecepcion: {"message":"Cannot add or update a child row: a foreign key constraint fails (`sistema_stock`.`lotes_mercaderia`, CONSTRAINT `lotes_mercaderia_ibfk_2` FOREIGN KEY (`proveedor_id`) REFERENCES `proveedores` (`proveedorId`))","code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sql":"\n                        INSERT INTO lotes_mercaderia (\n                            mercaderia_id, numero_lote, cantidad_inicial, cantidad_actual,\n                            fecha_vencimiento, precio_costo\n                        ) VALUES (50, 'AUTO-20250805-790', 1, 1, NULL, 0.01)\n                    ","sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`sistema_stock`.`lotes_mercaderia`, CONSTRAINT `lotes_mercaderia_ibfk_2` FOREIGN KEY (`proveedor_id`) REFERENCES `proveedores` (`proveedorId`))"}
2025-08-05T12:52:56.761Z [ERROR] Error en crearRecepcion: {"message":"Column 'deposito_id' cannot be null","code":"ER_BAD_NULL_ERROR","errno":1048,"sql":"\n                        INSERT INTO stock_lotes_depositos (lote_id, deposito_id, cantidad)\n                        VALUES (3, NULL, 5)\n                        ON DUPLICATE KEY UPDATE cantidad = cantidad + VALUES(cantidad)\n                    ","sqlState":"23000","sqlMessage":"Column 'deposito_id' cannot be null"}
2025-08-08T02:53:57.487Z [ERROR] Error en show transferencia: {}
2025-08-08T02:54:54.599Z [ERROR] Error en show transferencia: {}
2025-08-08T02:56:15.959Z [ERROR] Error en show transferencia: {}
2025-08-08T03:10:00.568Z [ERROR] Error en show transferencia: {}
2025-08-08T03:10:28.710Z [ERROR] Error en show transferencia: {}
2025-08-08T03:13:31.302Z [ERROR] Error en show transferencia: {}
2025-08-08T03:14:01.771Z [ERROR] Error en show transferencia: {}
2025-08-08T03:15:27.807Z [ERROR] Error en show transferencia: {}
2025-08-08T03:16:14.160Z [ERROR] Error en show transferencia: {}
2025-08-08T03:16:38.377Z [ERROR] Error en show transferencia: {}
2025-08-08T03:23:39.354Z [ERROR] Error en show transferencia: {}
2025-08-08T14:50:27.845Z [ERROR] Error en show transferencia: {}
2025-08-08T15:36:28.645Z [ERROR] Error en show transferencia: {}
2025-08-08T15:39:16.533Z [ERROR] Error en show transferencia: {}
2025-08-08T15:42:23.208Z [ERROR] Error en show transferencia: {}
2025-08-08T18:34:22.022Z [ERROR] Error en enviar transferencia: {"message":"Lock wait timeout exceeded; try restarting transaction","code":"ER_LOCK_WAIT_TIMEOUT","errno":1205,"sql":"\n                UPDATE detalle_ordenes_transferencia \n                SET cantidad_enviada = 1\n                WHERE id = 4\n            ","sqlState":"HY000","sqlMessage":"Lock wait timeout exceeded; try restarting transaction"}
2025-08-08T22:03:09.569Z [ERROR] Error en enviar transferencia: {"message":"Lock wait timeout exceeded; try restarting transaction","code":"ER_LOCK_WAIT_TIMEOUT","errno":1205,"sql":"\n                UPDATE detalle_ordenes_transferencia \n                SET cantidad_enviada = 1\n                WHERE id = 5\n            ","sqlState":"HY000","sqlMessage":"Lock wait timeout exceeded; try restarting transaction"}
2025-08-08T22:05:44.703Z [ERROR] Error en enviar transferencia: {"message":"Lock wait timeout exceeded; try restarting transaction","code":"ER_LOCK_WAIT_TIMEOUT","errno":1205,"sql":"\n                UPDATE detalle_ordenes_transferencia \n                SET cantidad_enviada = 2\n                WHERE id = 5\n            ","sqlState":"HY000","sqlMessage":"Lock wait timeout exceeded; try restarting transaction"}
2025-08-08T22:16:29.105Z [ERROR] Error en enviar transferencia: {"message":"Lock wait timeout exceeded; try restarting transaction","code":"ER_LOCK_WAIT_TIMEOUT","errno":1205,"sql":"\n                UPDATE detalle_ordenes_transferencia \n                SET cantidad_enviada = 3\n                WHERE id = 5\n            ","sqlState":"HY000","sqlMessage":"Lock wait timeout exceeded; try restarting transaction"}
2025-08-09T14:01:06.050Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-09T14:01:06.082Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-10T01:53:11.083Z [ERROR] Error en enviarMercaderia: {"message":"Unknown column 'NaN' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            UPDATE detalle_ordenes_transferencia \n            SET cantidad_enviada = NaN\n            WHERE id = 12\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'NaN' in 'field list'"}
2025-08-10T01:53:11.087Z [ERROR] Error en enviarMercaderia: {"message":"Unknown column 'NaN' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            UPDATE detalle_ordenes_transferencia \n            SET cantidad_enviada = NaN\n            WHERE id = 12\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'NaN' in 'field list'"}
2025-08-10T01:53:19.382Z [ERROR] Error en enviarMercaderia: {"message":"Unknown column 'NaN' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            UPDATE detalle_ordenes_transferencia \n            SET cantidad_enviada = NaN\n            WHERE id = 12\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'NaN' in 'field list'"}
2025-08-10T01:53:19.384Z [ERROR] Error en enviarMercaderia: {"message":"Unknown column 'NaN' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            UPDATE detalle_ordenes_transferencia \n            SET cantidad_enviada = NaN\n            WHERE id = 12\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'NaN' in 'field list'"}
2025-08-10T12:33:09.202Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-10T12:33:09.255Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-10T12:35:07.201Z [ERROR] Error en index transferencias: {"message":"","code":"ECONNREFUSED"}
2025-08-10T12:35:07.220Z [ERROR] Error en index transferencias: {"message":"","code":"ECONNREFUSED"}
2025-08-12T18:50:56.843Z [ERROR] Error en getDashboard: {}
2025-08-12T18:51:05.714Z [ERROR] Error en index movimientos: {"error":"Unknown column 'ms.created_at' in 'field list'","stack":"Error: Unknown column 'ms.created_at' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:845:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-12","fecha_hasta":"2025-08-12","include_stats":"true"},"timestamp":"2025-08-12T18:51:05.714Z"}
2025-08-12T19:11:55.136Z [ERROR] Error en getDashboard: {}
2025-08-12T19:13:25.508Z [ERROR] Error en getDashboard: {}
2025-08-12T19:13:35.621Z [ERROR] Error en getDashboard: {}
2025-08-12T19:17:46.180Z [ERROR] Error en getDashboard: {"message":"connect ETIMEDOUT","code":"ETIMEDOUT"}
2025-08-12T19:17:59.928Z [ERROR] Error en getDashboard: {}
2025-08-12T19:23:37.393Z [ERROR] Error en index movimientos: {"error":"Unknown column 'ms.created_at' in 'field list'","stack":"Error: Unknown column 'ms.created_at' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:845:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-12","fecha_hasta":"2025-08-12","include_stats":"true"},"timestamp":"2025-08-12T19:23:37.392Z"}
2025-08-12T19:25:21.096Z [ERROR] Error en getDashboard: {"message":"connect ETIMEDOUT","code":"ETIMEDOUT"}
2025-08-12T19:29:36.331Z [ERROR] Error en index movimientos: {"error":"Unknown column 'ms.created_at' in 'field list'","stack":"Error: Unknown column 'ms.created_at' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:845:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-12","fecha_hasta":"2025-08-12","include_stats":"true"},"timestamp":"2025-08-12T19:29:36.331Z"}
2025-08-12T23:26:30.265Z [ERROR] Error en show movimiento: {"error":"Cannot read properties of undefined (reading 'categoria_movimiento')","stack":"TypeError: Cannot read properties of undefined (reading 'categoria_movimiento')\n    at MovimientosController.show (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:1678:52)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Ariel\\soles\\routes\\stock.js:361:9","movimiento_id":"2","query_params":{"include_stock_impact":"true","context":"stock"},"timestamp":"2025-08-12T23:26:30.265Z"}
2025-08-12T23:30:33.263Z [ERROR] Error en show movimiento: {"error":"Cannot read properties of undefined (reading 'tipo_movimiento')","stack":"TypeError: Cannot read properties of undefined (reading 'tipo_movimiento')\n    at MovimientosController.show (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:1673:68)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Ariel\\soles\\routes\\stock.js:361:9","movimiento_id":"2","query_params":{"include_stock_impact":"true","context":"stock"},"timestamp":"2025-08-12T23:30:33.263Z"}
2025-08-14T22:53:10.300Z [ERROR] Error en index movimientos: {"error":"Unknown column 'm.codigo_code128' in 'field list'","stack":"Error: Unknown column 'm.codigo_code128' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:845:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-14","fecha_hasta":"2025-08-14","include_stats":"true"},"timestamp":"2025-08-14T22:53:10.299Z"}
2025-08-14T22:53:19.442Z [ERROR] Error en findWithFilters: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-14T22:53:19.444Z [ERROR] Error en index: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-14T22:53:23.567Z [ERROR] Error en findWithFilters: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-14T22:53:23.569Z [ERROR] Error en index: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-14T23:21:23.066Z [ERROR] Error en index movimientos: {"error":"Unknown column 'm.codigo_code128' in 'field list'","stack":"Error: Unknown column 'm.codigo_code128' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:845:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-14","fecha_hasta":"2025-08-14","include_stats":"true"},"timestamp":"2025-08-14T23:21:23.066Z"}
2025-08-14T23:21:36.665Z [ERROR] Error en index movimientos: {"error":"Unknown column 'm.codigo_code128' in 'field list'","stack":"Error: Unknown column 'm.codigo_code128' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:845:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-14","fecha_hasta":"2025-08-14","include_stats":"true"},"timestamp":"2025-08-14T23:21:36.665Z"}
2025-08-15T15:27:22.882Z [ERROR] Error en index categorías: {"message":"Unknown column 'descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    descripcion,\n                    activo,\n                    fecha_creacion,\n                    ultima_modificacion\n                FROM categorias \n                WHERE activo = 1 \n                ORDER BY descripcion ASC\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'descripcion' in 'field list'"}
2025-08-15T15:27:37.211Z [ERROR] Error en index categorías: {"message":"Unknown column 'descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    descripcion,\n                    activo,\n                    fecha_creacion,\n                    ultima_modificacion\n                FROM categorias \n                WHERE activo = 1 \n                ORDER BY descripcion ASC\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'descripcion' in 'field list'"}
2025-08-15T18:09:22.479Z [ERROR] Error en index movimientos: {"error":"Unknown column 'c.descripcion' in 'field list'","stack":"Error: Unknown column 'c.descripcion' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:843:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T18:09:22.478Z"}
2025-08-15T18:40:39.541Z [ERROR] Error en index movimientos: {"error":"Unknown column 'c.descripcion' in 'field list'","stack":"Error: Unknown column 'c.descripcion' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:843:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T18:40:39.541Z"}
2025-08-15T20:09:02.955Z [ERROR] Error en index movimientos: {"error":"Unknown column 'c.descripcion' in 'field list'","stack":"Error: Unknown column 'c.descripcion' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:843:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T20:09:02.955Z"}
2025-08-15T20:09:07.234Z [ERROR] Error en index movimientos: {"error":"Unknown column 'c.descripcion' in 'field list'","stack":"Error: Unknown column 'c.descripcion' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:843:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T20:09:07.234Z"}
2025-08-15T20:09:08.243Z [ERROR] Error en index movimientos: {"error":"Unknown column 'c.descripcion' in 'field list'","stack":"Error: Unknown column 'c.descripcion' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:843:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T20:09:08.243Z"}
2025-08-15T20:09:08.937Z [ERROR] Error en index movimientos: {"error":"Unknown column 'c.descripcion' in 'field list'","stack":"Error: Unknown column 'c.descripcion' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:843:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T20:09:08.937Z"}
2025-08-15T20:09:09.645Z [ERROR] Error en index movimientos: {"error":"Unknown column 'c.descripcion' in 'field list'","stack":"Error: Unknown column 'c.descripcion' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:843:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T20:09:09.645Z"}
2025-08-15T20:09:32.783Z [ERROR] Error en getStockGeneral: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_ean13,\n                    m.precio_venta,\n                    m.precio_costo,\n                    m.stock_minimo,\n                    c.descripcion as categoria,\n                    m.id_categoria,\n                    \n                    -- Stock por tipo de depósito\n                    COALESCE(stock_central.cantidad, 0) as stock_central,\n                    COALESCE(stock_vendedores.cantidad, 0) as stock_vendedores,\n                    COALESCE(stock_clientes.cantidad, 0) as stock_clientes,\n                    \n                    -- Stock total\n                    (COALESCE(stock_central.cantidad, 0) + \n                     COALESCE(stock_vendedores.cantidad, 0) + \n                     COALESCE(stock_clientes.cantidad, 0)) as stock_total,\n                    \n                    -- Estado del stock\n                    CASE \n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) = 0 THEN 'SIN_STOCK'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo THEN 'STOCK_BAJO'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo * 1.5 THEN 'STOCK_MEDIO'\n                        ELSE 'STOCK_OK'\n                    END as estado_stock,\n                    \n                    -- Valor del stock\n                    ((COALESCE(stock_central.cantidad, 0) + \n                      COALESCE(stock_vendedores.cantidad, 0) + \n                      COALESCE(stock_clientes.cantidad, 0)) * m.precio_costo) as valor_stock\n\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                \n                -- Stock en depósito central\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CENTRAL' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_central ON m.id = stock_central.mercaderia_id\n                \n                -- Stock en depósitos de vendedores\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'VENDEDOR' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_vendedores ON m.id = stock_vendedores.mercaderia_id\n                \n                -- Stock en depósitos de clientes\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CLIENTE' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_clientes ON m.id = stock_clientes.mercaderia_id\n\n                WHERE m.activo = 1\n                \n                \n                ORDER BY \n                    CASE estado_stock\n                        WHEN 'SIN_STOCK' THEN 1\n                        WHEN 'STOCK_BAJO' THEN 2\n                        WHEN 'STOCK_MEDIO' THEN 3\n                        ELSE 4\n                    END,\n                    m.descripcion ASC\n                \n                LIMIT ? OFFSET ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-15T20:10:03.451Z [ERROR] Error en getStockGeneral: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_ean13,\n                    m.precio_venta,\n                    m.precio_costo,\n                    m.stock_minimo,\n                    c.descripcion as categoria,\n                    m.id_categoria,\n                    \n                    -- Stock por tipo de depósito\n                    COALESCE(stock_central.cantidad, 0) as stock_central,\n                    COALESCE(stock_vendedores.cantidad, 0) as stock_vendedores,\n                    COALESCE(stock_clientes.cantidad, 0) as stock_clientes,\n                    \n                    -- Stock total\n                    (COALESCE(stock_central.cantidad, 0) + \n                     COALESCE(stock_vendedores.cantidad, 0) + \n                     COALESCE(stock_clientes.cantidad, 0)) as stock_total,\n                    \n                    -- Estado del stock\n                    CASE \n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) = 0 THEN 'SIN_STOCK'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo THEN 'STOCK_BAJO'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo * 1.5 THEN 'STOCK_MEDIO'\n                        ELSE 'STOCK_OK'\n                    END as estado_stock,\n                    \n                    -- Valor del stock\n                    ((COALESCE(stock_central.cantidad, 0) + \n                      COALESCE(stock_vendedores.cantidad, 0) + \n                      COALESCE(stock_clientes.cantidad, 0)) * m.precio_costo) as valor_stock\n\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                \n                -- Stock en depósito central\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CENTRAL' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_central ON m.id = stock_central.mercaderia_id\n                \n                -- Stock en depósitos de vendedores\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'VENDEDOR' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_vendedores ON m.id = stock_vendedores.mercaderia_id\n                \n                -- Stock en depósitos de clientes\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CLIENTE' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_clientes ON m.id = stock_clientes.mercaderia_id\n\n                WHERE m.activo = 1\n                \n                \n                ORDER BY \n                    CASE estado_stock\n                        WHEN 'SIN_STOCK' THEN 1\n                        WHEN 'STOCK_BAJO' THEN 2\n                        WHEN 'STOCK_MEDIO' THEN 3\n                        ELSE 4\n                    END,\n                    m.descripcion ASC\n                \n                LIMIT ? OFFSET ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-15T20:10:06.441Z [ERROR] Error en getStockGeneral: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_ean13,\n                    m.precio_venta,\n                    m.precio_costo,\n                    m.stock_minimo,\n                    c.descripcion as categoria,\n                    m.id_categoria,\n                    \n                    -- Stock por tipo de depósito\n                    COALESCE(stock_central.cantidad, 0) as stock_central,\n                    COALESCE(stock_vendedores.cantidad, 0) as stock_vendedores,\n                    COALESCE(stock_clientes.cantidad, 0) as stock_clientes,\n                    \n                    -- Stock total\n                    (COALESCE(stock_central.cantidad, 0) + \n                     COALESCE(stock_vendedores.cantidad, 0) + \n                     COALESCE(stock_clientes.cantidad, 0)) as stock_total,\n                    \n                    -- Estado del stock\n                    CASE \n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) = 0 THEN 'SIN_STOCK'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo THEN 'STOCK_BAJO'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo * 1.5 THEN 'STOCK_MEDIO'\n                        ELSE 'STOCK_OK'\n                    END as estado_stock,\n                    \n                    -- Valor del stock\n                    ((COALESCE(stock_central.cantidad, 0) + \n                      COALESCE(stock_vendedores.cantidad, 0) + \n                      COALESCE(stock_clientes.cantidad, 0)) * m.precio_costo) as valor_stock\n\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                \n                -- Stock en depósito central\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CENTRAL' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_central ON m.id = stock_central.mercaderia_id\n                \n                -- Stock en depósitos de vendedores\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'VENDEDOR' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_vendedores ON m.id = stock_vendedores.mercaderia_id\n                \n                -- Stock en depósitos de clientes\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CLIENTE' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_clientes ON m.id = stock_clientes.mercaderia_id\n\n                WHERE m.activo = 1\n                \n                \n                ORDER BY \n                    CASE estado_stock\n                        WHEN 'SIN_STOCK' THEN 1\n                        WHEN 'STOCK_BAJO' THEN 2\n                        WHEN 'STOCK_MEDIO' THEN 3\n                        ELSE 4\n                    END,\n                    m.descripcion ASC\n                \n                LIMIT ? OFFSET ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-15T20:21:25.941Z [ERROR] Error en index movimientos: {"error":"Unknown column 'c.descripcion' in 'field list'","stack":"Error: Unknown column 'c.descripcion' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:843:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T20:21:25.941Z"}
2025-08-15T20:37:00.064Z [ERROR] Error en getStockGeneral: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_ean13,\n                    m.precio_venta,\n                    m.precio_costo,\n                    m.stock_minimo,\n                    c.descripcion as categoria,\n                    m.id_categoria,\n                    \n                    -- Stock por tipo de depósito\n                    COALESCE(stock_central.cantidad, 0) as stock_central,\n                    COALESCE(stock_vendedores.cantidad, 0) as stock_vendedores,\n                    COALESCE(stock_clientes.cantidad, 0) as stock_clientes,\n                    \n                    -- Stock total\n                    (COALESCE(stock_central.cantidad, 0) + \n                     COALESCE(stock_vendedores.cantidad, 0) + \n                     COALESCE(stock_clientes.cantidad, 0)) as stock_total,\n                    \n                    -- Estado del stock\n                    CASE \n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) = 0 THEN 'SIN_STOCK'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo THEN 'STOCK_BAJO'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo * 1.5 THEN 'STOCK_MEDIO'\n                        ELSE 'STOCK_OK'\n                    END as estado_stock,\n                    \n                    -- Valor del stock\n                    ((COALESCE(stock_central.cantidad, 0) + \n                      COALESCE(stock_vendedores.cantidad, 0) + \n                      COALESCE(stock_clientes.cantidad, 0)) * m.precio_costo) as valor_stock\n\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                \n                -- Stock en depósito central\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CENTRAL' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_central ON m.id = stock_central.mercaderia_id\n                \n                -- Stock en depósitos de vendedores\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'VENDEDOR' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_vendedores ON m.id = stock_vendedores.mercaderia_id\n                \n                -- Stock en depósitos de clientes\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CLIENTE' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_clientes ON m.id = stock_clientes.mercaderia_id\n\n                WHERE m.activo = 1\n                \n                \n                ORDER BY \n                    CASE estado_stock\n                        WHEN 'SIN_STOCK' THEN 1\n                        WHEN 'STOCK_BAJO' THEN 2\n                        WHEN 'STOCK_MEDIO' THEN 3\n                        ELSE 4\n                    END,\n                    m.descripcion ASC\n                \n                LIMIT ? OFFSET ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-15T21:23:21.681Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:21.716Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:23.419Z [ERROR] Error en findWithFilters: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:23.421Z [ERROR] Error en index: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:28.855Z [ERROR] Error en findWithFilters: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:28.856Z [ERROR] Error en index: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:29.326Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:33.739Z [ERROR] Error en findWithFilters: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:33.741Z [ERROR] Error en index: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:39.096Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:23:58.478Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:24:34.605Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:25:17.269Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:25:17.323Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-15T21:26:34.474Z [ERROR] Error en getDashboard: {"message":"connect ETIMEDOUT","code":"ETIMEDOUT"}
2025-08-15T21:26:34.513Z [ERROR] Error en index categorías: {"message":"connect ETIMEDOUT","code":"ETIMEDOUT"}
2025-08-15T21:27:12.664Z [ERROR] Error en getDashboard: {"message":"connect ETIMEDOUT","code":"ETIMEDOUT"}
2025-08-15T21:27:12.688Z [ERROR] Error en index categorías: {"message":"connect ETIMEDOUT","code":"ETIMEDOUT"}
2025-08-15T21:31:28.213Z [ERROR] Error en index categorías: {"message":"Unknown column 'descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    descripcion,\n                    activo,\n                    fecha_creacion,\n                    ultima_modificacion\n                FROM categorias \n                WHERE activo = 1 \n                ORDER BY descripcion ASC\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'descripcion' in 'field list'"}
2025-08-15T21:31:28.340Z [ERROR] Error en index movimientos: {"error":"Unknown column 'm.codigo_code128' in 'field list'","stack":"Error: Unknown column 'm.codigo_code128' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:845:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T21:31:28.340Z"}
2025-08-15T21:33:10.940Z [ERROR] Error en index movimientos: {"error":"Unknown column 'm.codigo_code128' in 'field list'","stack":"Error: Unknown column 'm.codigo_code128' in 'field list'\n    at PromisePool.execute (C:\\Users\\Ariel\\soles\\node_modules\\mysql2\\promise.js:374:22)\n    at Object.query (C:\\Users\\Ariel\\soles\\config\\database.js:37:35)\n    at index (C:\\Users\\Ariel\\soles\\controllers\\MovimientosController.js:845:42)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Ariel\\soles\\node_modules\\express\\lib\\router\\index.js:280:10)","query_params":{"fecha_desde":"2025-08-15","fecha_hasta":"2025-08-15","include_stats":"true"},"timestamp":"2025-08-15T21:33:10.940Z"}
2025-08-15T21:37:23.517Z [ERROR] Error en findWithFilters: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-15T21:37:23.518Z [ERROR] Error en index: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-15T21:44:30.750Z [ERROR] Error en findWithFilters: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-15T21:44:30.752Z [ERROR] Error en index: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_code128,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-15T21:46:21.444Z [ERROR] Error en findWithFilters: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-15T21:46:21.446Z [ERROR] Error en index: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-15T21:46:47.743Z [ERROR] Error en findWithFilters: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-15T21:46:47.746Z [ERROR] Error en index: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.descripcion as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             GROUP BY m.id ORDER BY descripcion ASC","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-15T21:49:50.672Z [ERROR] Error en getStockGeneral: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_ean13,\n                    m.precio_venta,\n                    m.precio_costo,\n                    m.stock_minimo,\n                    c.descripcion as categoria,\n                    m.id_categoria,\n                    \n                    -- Stock por tipo de depósito\n                    COALESCE(stock_central.cantidad, 0) as stock_central,\n                    COALESCE(stock_vendedores.cantidad, 0) as stock_vendedores,\n                    COALESCE(stock_clientes.cantidad, 0) as stock_clientes,\n                    \n                    -- Stock total\n                    (COALESCE(stock_central.cantidad, 0) + \n                     COALESCE(stock_vendedores.cantidad, 0) + \n                     COALESCE(stock_clientes.cantidad, 0)) as stock_total,\n                    \n                    -- Estado del stock\n                    CASE \n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) = 0 THEN 'SIN_STOCK'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo THEN 'STOCK_BAJO'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo * 1.5 THEN 'STOCK_MEDIO'\n                        ELSE 'STOCK_OK'\n                    END as estado_stock,\n                    \n                    -- Valor del stock\n                    ((COALESCE(stock_central.cantidad, 0) + \n                      COALESCE(stock_vendedores.cantidad, 0) + \n                      COALESCE(stock_clientes.cantidad, 0)) * m.precio_costo) as valor_stock\n\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                \n                -- Stock en depósito central\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CENTRAL' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_central ON m.id = stock_central.mercaderia_id\n                \n                -- Stock en depósitos de vendedores\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'VENDEDOR' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_vendedores ON m.id = stock_vendedores.mercaderia_id\n                \n                -- Stock en depósitos de clientes\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CLIENTE' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_clientes ON m.id = stock_clientes.mercaderia_id\n\n                WHERE m.activo = 1\n                \n                \n                ORDER BY \n                    CASE estado_stock\n                        WHEN 'SIN_STOCK' THEN 1\n                        WHEN 'STOCK_BAJO' THEN 2\n                        WHEN 'STOCK_MEDIO' THEN 3\n                        ELSE 4\n                    END,\n                    m.descripcion ASC\n                \n                LIMIT ? OFFSET ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-15T21:49:57.389Z [ERROR] Error en getStockGeneral: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.codigo_ean13,\n                    m.precio_venta,\n                    m.precio_costo,\n                    m.stock_minimo,\n                    c.descripcion as categoria,\n                    m.id_categoria,\n                    \n                    -- Stock por tipo de depósito\n                    COALESCE(stock_central.cantidad, 0) as stock_central,\n                    COALESCE(stock_vendedores.cantidad, 0) as stock_vendedores,\n                    COALESCE(stock_clientes.cantidad, 0) as stock_clientes,\n                    \n                    -- Stock total\n                    (COALESCE(stock_central.cantidad, 0) + \n                     COALESCE(stock_vendedores.cantidad, 0) + \n                     COALESCE(stock_clientes.cantidad, 0)) as stock_total,\n                    \n                    -- Estado del stock\n                    CASE \n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) = 0 THEN 'SIN_STOCK'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo THEN 'STOCK_BAJO'\n                        WHEN (COALESCE(stock_central.cantidad, 0) + \n                              COALESCE(stock_vendedores.cantidad, 0) + \n                              COALESCE(stock_clientes.cantidad, 0)) <= m.stock_minimo * 1.5 THEN 'STOCK_MEDIO'\n                        ELSE 'STOCK_OK'\n                    END as estado_stock,\n                    \n                    -- Valor del stock\n                    ((COALESCE(stock_central.cantidad, 0) + \n                      COALESCE(stock_vendedores.cantidad, 0) + \n                      COALESCE(stock_clientes.cantidad, 0)) * m.precio_costo) as valor_stock\n\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                \n                -- Stock en depósito central\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CENTRAL' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_central ON m.id = stock_central.mercaderia_id\n                \n                -- Stock en depósitos de vendedores\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'VENDEDOR' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_vendedores ON m.id = stock_vendedores.mercaderia_id\n                \n                -- Stock en depósitos de clientes\n                LEFT JOIN (\n                    SELECT sd.mercaderia_id, SUM(sd.cantidad) as cantidad\n                    FROM stock_depositos sd\n                    INNER JOIN depositos d ON sd.deposito_id = d.id\n                    WHERE d.tipo = 'CLIENTE' AND d.activo = 1\n                    GROUP BY sd.mercaderia_id\n                ) stock_clientes ON m.id = stock_clientes.mercaderia_id\n\n                WHERE m.activo = 1\n                \n                \n                ORDER BY \n                    CASE estado_stock\n                        WHEN 'SIN_STOCK' THEN 1\n                        WHEN 'STOCK_BAJO' THEN 2\n                        WHEN 'STOCK_MEDIO' THEN 3\n                        ELSE 4\n                    END,\n                    m.descripcion ASC\n                \n                LIMIT ? OFFSET ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-08-16T12:07:05.699Z [ERROR] Error en getDashboard: {"message":"read ECONNRESET","code":"ECONNRESET","errno":-4077}
2025-08-16T12:07:05.733Z [ERROR] Error en index categorías: {"message":"read ECONNRESET","code":"ECONNRESET","errno":-4077}
2025-08-16T12:07:12.559Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-16T12:07:12.624Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-16T12:07:43.787Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-16T14:06:05.259Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:05.320Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:05.409Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:05.511Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:05.658Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:05.794Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:05.948Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:06.116Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:06.308Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:06.537Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:06.771Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:07.030Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:07.298Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:07.631Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:07.974Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:08.305Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:08.706Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:09.077Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:09.542Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:06:10.043Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:07:01.212Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:07:05.005Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:07:06.504Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:07:08.024Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:07:09.887Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:07:14.410Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:19:09.281Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:20:16.870Z [ERROR] Error obteniendo proveedores de mercadería: {}
2025-08-16T14:39:58.459Z [ERROR] Error general en getProveedoresMercaderia: {"error":"Cannot read properties of undefined (reading 'id')","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at getProveedoresMercaderia (C:\\Users\\Ariel\\soles\\controllers\\MercaderiaProveedoresController.js:120:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","mercaderiaId":"50"}
2025-08-16T15:12:47.466Z [ERROR] Error insertando/actualizando relación: {"error":"object is not iterable (cannot read property Symbol(Symbol.iterator))","mercaderiaId":"50","proveedorId":"18"}
2025-08-16T19:12:02.522Z [ERROR] Error obteniendo datos de mercaderías: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.codigo_sku,\n                    m.descripcion,\n                    m.precio_venta,\n                    m.codigo_code128,\n                    m.codigo_ean13,\n                    m.unidad_medida,\n                    c.categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_actual\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE m.id IN (?) AND m.activo = 1\n                GROUP BY m.id\n                ORDER BY m.descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-16T19:14:10.124Z [ERROR] Error obteniendo datos de mercaderías: {"message":"Unknown column 'm.codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id,\n                    m.codigo_sku,\n                    m.descripcion,\n                    m.precio_venta,\n                    m.codigo_code128,\n                    m.codigo_ean13,\n                    m.unidad_medida,\n                    c.categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_actual\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE m.id IN (?) AND m.activo = 1\n                GROUP BY m.id\n                ORDER BY m.descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'm.codigo_code128' in 'field list'"}
2025-08-16T19:24:03.337Z [ERROR] Error en findWithFilters: {"message":"Incorrect arguments to mysqld_stmt_execute","code":"ER_WRONG_ARGUMENTS","errno":1210,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.categoria as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             AND (m.descripcion LIKE ? OR m.codigo_sku LIKE ? ) GROUP BY m.id ORDER BY descripcion ASC","sqlState":"HY000","sqlMessage":"Incorrect arguments to mysqld_stmt_execute"}
2025-08-16T19:24:03.340Z [ERROR] Error en index: {"message":"Incorrect arguments to mysqld_stmt_execute","code":"ER_WRONG_ARGUMENTS","errno":1210,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.categoria as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             AND (m.descripcion LIKE ? OR m.codigo_sku LIKE ? ) GROUP BY m.id ORDER BY descripcion ASC","sqlState":"HY000","sqlMessage":"Incorrect arguments to mysqld_stmt_execute"}
2025-08-16T19:24:09.389Z [ERROR] Error en findWithFilters: {"message":"Incorrect arguments to mysqld_stmt_execute","code":"ER_WRONG_ARGUMENTS","errno":1210,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.categoria as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             AND (m.descripcion LIKE ? OR m.codigo_sku LIKE ? ) GROUP BY m.id ORDER BY descripcion ASC","sqlState":"HY000","sqlMessage":"Incorrect arguments to mysqld_stmt_execute"}
2025-08-16T19:24:09.390Z [ERROR] Error en index: {"message":"Incorrect arguments to mysqld_stmt_execute","code":"ER_WRONG_ARGUMENTS","errno":1210,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.categoria as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             AND (m.descripcion LIKE ? OR m.codigo_sku LIKE ? ) GROUP BY m.id ORDER BY descripcion ASC","sqlState":"HY000","sqlMessage":"Incorrect arguments to mysqld_stmt_execute"}
2025-08-16T19:25:39.561Z [ERROR] Error en findWithFilters: {"message":"Incorrect arguments to mysqld_stmt_execute","code":"ER_WRONG_ARGUMENTS","errno":1210,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.categoria as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             AND (m.descripcion LIKE ? OR m.codigo_sku LIKE ? ) GROUP BY m.id ORDER BY descripcion ASC","sqlState":"HY000","sqlMessage":"Incorrect arguments to mysqld_stmt_execute"}
2025-08-16T19:25:39.563Z [ERROR] Error en index: {"message":"Incorrect arguments to mysqld_stmt_execute","code":"ER_WRONG_ARGUMENTS","errno":1210,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.categoria as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             AND (m.descripcion LIKE ? OR m.codigo_sku LIKE ? ) GROUP BY m.id ORDER BY descripcion ASC","sqlState":"HY000","sqlMessage":"Incorrect arguments to mysqld_stmt_execute"}
2025-08-16T19:26:29.872Z [ERROR] Error en findWithFilters: {"message":"Incorrect arguments to mysqld_stmt_execute","code":"ER_WRONG_ARGUMENTS","errno":1210,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.categoria as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             AND (m.descripcion LIKE ? OR m.codigo_sku LIKE ? ) GROUP BY m.id HAVING stock_total = 0 ORDER BY descripcion ASC","sqlState":"HY000","sqlMessage":"Incorrect arguments to mysqld_stmt_execute"}
2025-08-16T19:26:29.874Z [ERROR] Error en index: {"message":"Incorrect arguments to mysqld_stmt_execute","code":"ER_WRONG_ARGUMENTS","errno":1210,"sql":"\n                SELECT \n                    m.id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_costo,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    m.unidad_medida,\n                    m.imagen,\n                    m.activo,\n                    m.fecha_creacion,\n                    c.categoria as categoria,\n                    COALESCE(SUM(sd.cantidad), 0) as stock_total\n                FROM mercaderias m\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                LEFT JOIN stock_depositos sd ON m.id = sd.mercaderia_id\n                WHERE 1=1\n             AND (m.descripcion LIKE ? OR m.codigo_sku LIKE ? ) GROUP BY m.id HAVING stock_total = 0 ORDER BY descripcion ASC","sqlState":"HY000","sqlMessage":"Incorrect arguments to mysqld_stmt_execute"}
2025-08-17T13:00:05.236Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-17T13:00:05.289Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-17T13:00:06.189Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-17T13:39:39.614Z [ERROR] Error obteniendo mercaderías del proveedor: {"message":"Unknown column 'c.nombre' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id as mercaderia_id,\n                    m.codigo_sku,\n                    m.descripcion,\n                    m.precio_costo,\n                    m.precio_venta,\n                    mp.precio_compra,\n                    mp.codigo_producto_proveedor,\n                    mp.tiempo_entrega_dias,\n                    mp.cantidad_minima_pedido,\n                    mp.descuento_porcentaje,\n                    mp.condiciones_pago,\n                    mp.es_proveedor_principal,\n                    mp.observaciones,\n                    c.nombre as categoria_nombre\n                FROM mercaderias m\n                INNER JOIN mercaderia_proveedores mp ON m.id = mp.mercaderia_id\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                WHERE mp.proveedor_id = ? \n                AND mp.activo = 1 \n                AND m.activo = 1\n                ORDER BY mp.es_proveedor_principal DESC, m.descripcion ASC\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.nombre' in 'field list'"}
2025-08-21T18:46:01.761Z [ERROR] Error obteniendo datos de mercaderías: {"message":"Unknown column 'codigo' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    descripcion,\n                    codigo,\n                    codigo_sku,\n                    codigo_code128,\n                    precio_venta,\n                    stock_actual,\n                    unidad_medida,\n                    activo\n                FROM mercaderias \n                WHERE id IN (?) AND activo = 1\n                ORDER BY descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'codigo' in 'field list'"}
2025-08-21T18:49:26.871Z [ERROR] Error obteniendo datos de mercaderías: {"message":"Unknown column 'codigo' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    descripcion,\n                    codigo,\n                    codigo_sku,\n                    codigo_code128,\n                    precio_venta,\n                    stock_actual,\n                    unidad_medida,\n                    activo\n                FROM mercaderias \n                WHERE id IN (?) AND activo = 1\n                ORDER BY descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'codigo' in 'field list'"}
2025-08-21T18:56:40.660Z [ERROR] Error obteniendo datos de mercaderías: {"message":"Unknown column 'codigo_code128' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    descripcion,\n                    codigo_sku,\n                    codigo_code128,\n                    precio_venta,\n                    stock_actual,\n                    unidad_medida,\n                    activo\n                FROM mercaderias \n                WHERE id IN (?) AND activo = 1\n                ORDER BY descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'codigo_code128' in 'field list'"}
2025-08-21T18:58:27.860Z [ERROR] Error obteniendo datos de mercaderías: {"message":"Unknown column 'stock_actual' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    descripcion,\n                    codigo_sku,\n                    precio_venta,\n                    stock_actual,\n                    unidad_medida,\n                    activo\n                FROM mercaderias \n                WHERE id IN (?) AND activo = 1\n                ORDER BY descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'stock_actual' in 'field list'"}
2025-08-21T19:01:48.515Z [ERROR] Error obteniendo datos de mercaderías: {"message":"Unknown column 'codigo' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    descripcion,\n                    codigo,_sku as codigo,\n                    codigo_sku,\n                    precio_venta,\n                    unidad_medida,\n                    activo\n                FROM mercaderias \n                WHERE id IN (?) AND activo = 1\n                ORDER BY descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'codigo' in 'field list'"}
2025-08-21T21:22:24.575Z [ERROR] [USB-Básico] Error creando dispositivo: "usb.on is not a function"
2025-08-21T21:22:28.252Z [ERROR] [USB-Simple] Error: "usb.on is not a function"
2025-08-21T21:22:39.028Z [ERROR] [USB-TestEscritura] Error general: "usb.on is not a function"
2025-08-21T21:25:10.829Z [ERROR] [USB-Básico] Error creando dispositivo: "usb.on is not a function"
2025-08-21T21:26:22.009Z [ERROR] [USB-Básico] Error creando dispositivo: "usb.on is not a function"
2025-08-21T21:27:51.807Z [ERROR] [USB-Básico] Error creando dispositivo: "usb.on is not a function"
2025-08-21T21:45:36.004Z [ERROR] [USB-Básico] Error creando dispositivo: "usb.on is not a function"
2025-08-21T21:46:14.137Z [ERROR] [USB-Básico] Error creando dispositivo: "usb.on is not a function"
2025-08-21T21:46:40.338Z [ERROR] [USB-Básico] Error creando dispositivo: "usb.on is not a function"
2025-08-21T23:21:58.069Z [ERROR] [USB-Básico] Error creando dispositivo: "usb.on is not a function"
2025-08-22T12:24:40.012Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-08-22T12:24:40.106Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-22T12:24:40.998Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-08-23T14:44:43.061Z [ERROR] ❌ Error imprimiendo etiquetas: {}
2025-08-23T14:44:56.509Z [ERROR] ❌ Error imprimiendo etiquetas: {}
2025-08-25T20:46:06.477Z [ERROR] ❌ Error imprimiendo etiquetas: {}
2025-08-25T20:46:14.679Z [ERROR] ❌ Error imprimiendo etiquetas: {}
2025-08-25T21:06:13.792Z [ERROR] ❌ Error imprimiendo etiquetas: {}
2025-08-25T21:06:49.691Z [ERROR] ❌ Error imprimiendo etiquetas: {}
2025-08-25T22:14:19.941Z [ERROR] ❌ Error imprimiendo etiquetas: {}
2025-08-29T11:50:47.387Z [ERROR] Error creando recepción: {"message":"Cannot add or update a child row: a foreign key constraint fails (`sistema_stock`.`recepciones_mercaderia`, CONSTRAINT `recepciones_mercaderia_ibfk_3` FOREIGN KEY (`usuario_id`) REFERENCES `usuarios` (`id`))","code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sql":"\n                INSERT INTO recepciones_mercaderia (\n                    numero_recepcion, proveedor_id, fecha_recepcion,\n                    fecha_vencimiento_documento, numero_remito, numero_factura, \n                    total, observaciones, usuario_id, created_at, updated_at\n                ) VALUES ('REC-1756468247377', 18, '2025-08-29', NULL, 'REM-001', NULL, 100, NULL, 1, NOW(), NOW())\n            ","sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`sistema_stock`.`recepciones_mercaderia`, CONSTRAINT `recepciones_mercaderia_ibfk_3` FOREIGN KEY (`usuario_id`) REFERENCES `usuarios` (`id`))"}
2025-08-29T12:02:05.339Z [ERROR] Error creando recepción: {"message":"Cannot add or update a child row: a foreign key constraint fails (`sistema_stock`.`recepciones_mercaderia`, CONSTRAINT `recepciones_mercaderia_ibfk_3` FOREIGN KEY (`usuario_id`) REFERENCES `usuarios` (`id`))","code":"ER_NO_REFERENCED_ROW_2","errno":1452,"sql":"\n                INSERT INTO recepciones_mercaderia (\n                    numero_recepcion, proveedor_id, fecha_recepcion,\n                    fecha_vencimiento_documento, numero_remito, numero_factura, \n                    total, observaciones, usuario_id, created_at, updated_at\n                ) VALUES ('REC-1756468842141', 18, '2025-08-29', NULL, 'REM-001', NULL, 100, NULL, 1, NOW(), NOW())\n            ","sqlState":"23000","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`sistema_stock`.`recepciones_mercaderia`, CONSTRAINT `recepciones_mercaderia_ibfk_3` FOREIGN KEY (`usuario_id`) REFERENCES `usuarios` (`id`))"}
2025-08-29T12:09:13.969Z [ERROR] Error creando recepción: {"message":"Unknown column 'created_at' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    INSERT INTO detalle_recepciones (\n                        recepcion_id, mercaderia_id, cantidad_recibida, \n                        precio_unitario, porcentaje_iva, iva_unitario, precio_con_iva,\n                        numero_lote, fecha_vencimiento, observaciones,\n                        created_at, updated_at\n                    ) VALUES (12, 49, 1, 100, 0, 0, 100, NULL, NULL, NULL, NOW(), NOW())\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'created_at' in 'field list'"}
2025-09-01T21:00:05.242Z [ERROR] Error en búsqueda de mercaderías: {"message":"Unknown column 'stock_actual' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    codigo_sku,\n                    descripcion,\n                    COALESCE(precio_costo, 0) as precio_costo,\n                    COALESCE(precio_venta, 0) as precio_venta,\n                    COALESCE(stock_actual, 0) as stock_actual,\n                    COALESCE(unidad_medida, '') as unidad_medida,\n                    activo,\n                    -- Campo de relevancia para ordenamiento\n                    CASE \n                        WHEN codigo_sku = ? THEN 1          -- Coincidencia exacta en SKU (máxima prioridad)\n                        WHEN codigo_sku LIKE ? THEN 2       -- SKU que contiene el término\n                        WHEN descripcion LIKE ? THEN 3      -- Descripción que contiene el término\n                        ELSE 4\n                    END as relevancia\n                FROM mercaderias \n                WHERE activo = 1 \n                AND (\n                    codigo_sku LIKE ? OR \n                    descripcion LIKE ?\n                )\n                ORDER BY relevancia ASC, descripcion ASC\n                LIMIT ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'stock_actual' in 'field list'"}
2025-09-01T21:00:05.659Z [ERROR] Error en búsqueda de mercaderías: {"message":"Unknown column 'stock_actual' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    codigo_sku,\n                    descripcion,\n                    COALESCE(precio_costo, 0) as precio_costo,\n                    COALESCE(precio_venta, 0) as precio_venta,\n                    COALESCE(stock_actual, 0) as stock_actual,\n                    COALESCE(unidad_medida, '') as unidad_medida,\n                    activo,\n                    -- Campo de relevancia para ordenamiento\n                    CASE \n                        WHEN codigo_sku = ? THEN 1          -- Coincidencia exacta en SKU (máxima prioridad)\n                        WHEN codigo_sku LIKE ? THEN 2       -- SKU que contiene el término\n                        WHEN descripcion LIKE ? THEN 3      -- Descripción que contiene el término\n                        ELSE 4\n                    END as relevancia\n                FROM mercaderias \n                WHERE activo = 1 \n                AND (\n                    codigo_sku LIKE ? OR \n                    descripcion LIKE ?\n                )\n                ORDER BY relevancia ASC, descripcion ASC\n                LIMIT ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'stock_actual' in 'field list'"}
2025-09-01T21:00:10.313Z [ERROR] Error en búsqueda de mercaderías: {"message":"Unknown column 'stock_actual' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    codigo_sku,\n                    descripcion,\n                    COALESCE(precio_costo, 0) as precio_costo,\n                    COALESCE(precio_venta, 0) as precio_venta,\n                    COALESCE(stock_actual, 0) as stock_actual,\n                    COALESCE(unidad_medida, '') as unidad_medida,\n                    activo,\n                    -- Campo de relevancia para ordenamiento\n                    CASE \n                        WHEN codigo_sku = ? THEN 1          -- Coincidencia exacta en SKU (máxima prioridad)\n                        WHEN codigo_sku LIKE ? THEN 2       -- SKU que contiene el término\n                        WHEN descripcion LIKE ? THEN 3      -- Descripción que contiene el término\n                        ELSE 4\n                    END as relevancia\n                FROM mercaderias \n                WHERE activo = 1 \n                AND (\n                    codigo_sku LIKE ? OR \n                    descripcion LIKE ?\n                )\n                ORDER BY relevancia ASC, descripcion ASC\n                LIMIT ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'stock_actual' in 'field list'"}
2025-09-01T21:00:12.455Z [ERROR] Error en búsqueda de mercaderías: {"message":"Unknown column 'stock_actual' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    codigo_sku,\n                    descripcion,\n                    COALESCE(precio_costo, 0) as precio_costo,\n                    COALESCE(precio_venta, 0) as precio_venta,\n                    COALESCE(stock_actual, 0) as stock_actual,\n                    COALESCE(unidad_medida, '') as unidad_medida,\n                    activo,\n                    -- Campo de relevancia para ordenamiento\n                    CASE \n                        WHEN codigo_sku = ? THEN 1          -- Coincidencia exacta en SKU (máxima prioridad)\n                        WHEN codigo_sku LIKE ? THEN 2       -- SKU que contiene el término\n                        WHEN descripcion LIKE ? THEN 3      -- Descripción que contiene el término\n                        ELSE 4\n                    END as relevancia\n                FROM mercaderias \n                WHERE activo = 1 \n                AND (\n                    codigo_sku LIKE ? OR \n                    descripcion LIKE ?\n                )\n                ORDER BY relevancia ASC, descripcion ASC\n                LIMIT ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'stock_actual' in 'field list'"}
2025-09-01T21:00:13.377Z [ERROR] Error en búsqueda de mercaderías: {"message":"Unknown column 'stock_actual' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    codigo_sku,\n                    descripcion,\n                    COALESCE(precio_costo, 0) as precio_costo,\n                    COALESCE(precio_venta, 0) as precio_venta,\n                    COALESCE(stock_actual, 0) as stock_actual,\n                    COALESCE(unidad_medida, '') as unidad_medida,\n                    activo,\n                    -- Campo de relevancia para ordenamiento\n                    CASE \n                        WHEN codigo_sku = ? THEN 1          -- Coincidencia exacta en SKU (máxima prioridad)\n                        WHEN codigo_sku LIKE ? THEN 2       -- SKU que contiene el término\n                        WHEN descripcion LIKE ? THEN 3      -- Descripción que contiene el término\n                        ELSE 4\n                    END as relevancia\n                FROM mercaderias \n                WHERE activo = 1 \n                AND (\n                    codigo_sku LIKE ? OR \n                    descripcion LIKE ?\n                )\n                ORDER BY relevancia ASC, descripcion ASC\n                LIMIT ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'stock_actual' in 'field list'"}
2025-09-01T21:12:03.698Z [ERROR] Error en búsqueda de mercaderías: {"message":"Unknown column 'stock_actual' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    id,\n                    codigo_sku,\n                    descripcion,\n                    COALESCE(precio_costo, 0) as precio_costo,\n                    COALESCE(precio_venta, 0) as precio_venta,\n                    COALESCE(stock_actual, 0) as stock_actual,\n                    COALESCE(unidad_medida, '') as unidad_medida,\n                    activo,\n                    -- Campo de relevancia para ordenamiento\n                    CASE \n                        WHEN codigo_sku = ? THEN 1          -- Coincidencia exacta en SKU (máxima prioridad)\n                        WHEN codigo_sku LIKE ? THEN 2       -- SKU que contiene el término\n                        WHEN descripcion LIKE ? THEN 3      -- Descripción que contiene el término\n                        ELSE 4\n                    END as relevancia\n                FROM mercaderias \n                WHERE activo = 1 \n                AND (\n                    codigo_sku LIKE ? OR \n                    descripcion LIKE ?\n                )\n                ORDER BY relevancia ASC, descripcion ASC\n                LIMIT ?\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'stock_actual' in 'field list'"}
2025-09-03T19:40:17.950Z [ERROR] Error en getStock vendedor: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id as mercaderia_id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    sd.cantidad,\n                    d.nombre as deposito_nombre,\n                    c.descripcion as categoria,\n                    CASE \n                        WHEN sd.cantidad <= m.stock_minimo THEN 'BAJO'\n                        WHEN sd.cantidad = 0 THEN 'SIN_STOCK'\n                        ELSE 'NORMAL'\n                    END as estado_stock\n                FROM stock_depositos sd\n                INNER JOIN depositos d ON sd.deposito_id = d.id\n                INNER JOIN mercaderias m ON sd.mercaderia_id = m.id\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                WHERE d.entity_id = ? AND d.tipo = \"VENDEDOR\" AND d.activo = 1\n                ORDER BY m.descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-09-03T19:40:24.143Z [ERROR] Error en getStock vendedor: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id as mercaderia_id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    sd.cantidad,\n                    d.nombre as deposito_nombre,\n                    c.descripcion as categoria,\n                    CASE \n                        WHEN sd.cantidad <= m.stock_minimo THEN 'BAJO'\n                        WHEN sd.cantidad = 0 THEN 'SIN_STOCK'\n                        ELSE 'NORMAL'\n                    END as estado_stock\n                FROM stock_depositos sd\n                INNER JOIN depositos d ON sd.deposito_id = d.id\n                INNER JOIN mercaderias m ON sd.mercaderia_id = m.id\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                WHERE d.entity_id = ? AND d.tipo = \"VENDEDOR\" AND d.activo = 1\n                ORDER BY m.descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-09-03T19:40:28.823Z [ERROR] Error en getStock vendedor: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id as mercaderia_id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    sd.cantidad,\n                    d.nombre as deposito_nombre,\n                    c.descripcion as categoria,\n                    CASE \n                        WHEN sd.cantidad <= m.stock_minimo THEN 'BAJO'\n                        WHEN sd.cantidad = 0 THEN 'SIN_STOCK'\n                        ELSE 'NORMAL'\n                    END as estado_stock\n                FROM stock_depositos sd\n                INNER JOIN depositos d ON sd.deposito_id = d.id\n                INNER JOIN mercaderias m ON sd.mercaderia_id = m.id\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                WHERE d.entity_id = ? AND d.tipo = \"VENDEDOR\" AND d.activo = 1\n                ORDER BY m.descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-09-03T20:22:40.500Z [ERROR] Error en getStock vendedor: {"message":"Unknown column 'c.descripcion' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                SELECT \n                    m.id as mercaderia_id,\n                    m.descripcion,\n                    m.codigo_sku,\n                    m.precio_venta,\n                    m.stock_minimo,\n                    sd.cantidad,\n                    d.nombre as deposito_nombre,\n                    c.descripcion as categoria,\n                    CASE \n                        WHEN sd.cantidad <= m.stock_minimo THEN 'BAJO'\n                        WHEN sd.cantidad = 0 THEN 'SIN_STOCK'\n                        ELSE 'NORMAL'\n                    END as estado_stock\n                FROM stock_depositos sd\n                INNER JOIN depositos d ON sd.deposito_id = d.id\n                INNER JOIN mercaderias m ON sd.mercaderia_id = m.id\n                LEFT JOIN categorias c ON m.id_categoria = c.id\n                WHERE d.entity_id = ? AND d.tipo = \"VENDEDOR\" AND d.activo = 1\n                ORDER BY m.descripcion\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'c.descripcion' in 'field list'"}
2025-09-08T13:23:38.788Z [ERROR] Error en create proveedor: {}
2025-09-08T13:25:24.508Z [ERROR] Error en create proveedor: {"message":"Duplicate entry '12-34567890-2' for key 'cuit'","code":"ER_DUP_ENTRY","errno":1062,"sql":"INSERT INTO proveedores (razonSocial, cuit, telefono, email, domicilio, activo) \n                 VALUES (?, ?, ?, ?, ?, ?)","sqlState":"23000","sqlMessage":"Duplicate entry '12-34567890-2' for key 'cuit'"}
2025-09-08T13:26:07.474Z [ERROR] Error en create proveedor: {}
2025-09-08T13:27:12.427Z [ERROR] Error en create proveedor: {}
2025-09-08T13:30:00.877Z [ERROR] Error en create proveedor: {"message":"Duplicate entry '11-11111111-1' for key 'cuit'","code":"ER_DUP_ENTRY","errno":1062,"sql":"INSERT INTO proveedores (razonSocial, cuit, telefono, email, domicilio, activo) \n                 VALUES (?, ?, ?, ?, ?, ?)","sqlState":"23000","sqlMessage":"Duplicate entry '11-11111111-1' for key 'cuit'"}
2025-09-08T13:33:10.341Z [ERROR] Error en create proveedor: {"message":"Duplicate entry '11-11111111-1' for key 'cuit'","code":"ER_DUP_ENTRY","errno":1062,"sql":"INSERT INTO proveedores (razonSocial, cuit, telefono, email, domicilio, activo) \n                 VALUES (?, ?, ?, ?, ?, ?)","sqlState":"23000","sqlMessage":"Duplicate entry '11-11111111-1' for key 'cuit'"}
2025-09-08T13:38:44.076Z [ERROR] Error en create proveedor: {}
2025-09-08T13:38:45.722Z [ERROR] Error en create proveedor: {"message":"Duplicate entry '22-22222222-2' for key 'cuit'","code":"ER_DUP_ENTRY","errno":1062,"sql":"INSERT INTO proveedores (razonSocial, cuit, telefono, email, domicilio, activo) \n                 VALUES (?, ?, ?, ?, ?, ?)","sqlState":"23000","sqlMessage":"Duplicate entry '22-22222222-2' for key 'cuit'"}
2025-09-08T13:39:40.275Z [ERROR] Error en destroy proveedor: {"message":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"SELECT COUNT(*) as count FROM movimientos_mercaderias WHERE proveedor_id = ?","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist"}
2025-09-08T13:41:09.722Z [ERROR] Error en create proveedor: {}
2025-09-08T13:58:15.267Z [ERROR] Error en create proveedor: {}
2025-09-08T13:59:57.594Z [ERROR] Error en create proveedor: {}
2025-09-08T14:01:03.568Z [ERROR] Error en create proveedor: {}
2025-09-08T14:03:53.315Z [ERROR] Error en create proveedor: {"message":"Duplicate entry '55-55555555-5' for key 'cuit'","code":"ER_DUP_ENTRY","errno":1062,"sql":"INSERT INTO proveedores (razonSocial, cuit, telefono, email, domicilio, activo) \n             VALUES (?, ?, ?, ?, ?, ?)","sqlState":"23000","sqlMessage":"Duplicate entry '55-55555555-5' for key 'cuit'"}
2025-09-08T14:05:44.903Z [ERROR] Error en destroy proveedor: {"message":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"SELECT COUNT(*) as count FROM movimientos_mercaderias WHERE proveedor_id = ?","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist"}
2025-09-08T14:07:23.158Z [ERROR] Error en destroy proveedor: {"message":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"SELECT COUNT(*) as count FROM movimientos_mercaderias WHERE proveedor_id = ?","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist"}
2025-09-08T14:11:39.138Z [ERROR] Error en destroy proveedor: {"message":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"SELECT COUNT(*) as count FROM movimientos_mercaderias WHERE proveedor_id = ?","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.movimientos_mercaderias' doesn't exist"}
2025-09-08T14:12:14.499Z [ERROR] Error en destroy proveedor: {"message":"Table 'sistema_stock.recepciones_mercaderias' doesn't exist","code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"SELECT COUNT(*) as count FROM recepciones_mercaderias WHERE proveedor_id = ?","sqlState":"42S02","sqlMessage":"Table 'sistema_stock.recepciones_mercaderias' doesn't exist"}
2025-09-08T14:13:35.043Z [ERROR] Error en destroy proveedor: {}
2025-09-08T14:14:42.332Z [ERROR] Error en destroy proveedor: {}
2025-09-08T14:16:04.313Z [ERROR] Error en destroy proveedor: {}
2025-09-08T14:30:40.059Z [ERROR] Error en update proveedor: {}
2025-09-08T14:31:25.299Z [ERROR] Error en update proveedor: {}
2025-09-08T14:32:16.679Z [ERROR] Error en update proveedor: {}
2025-09-09T21:08:53.357Z [ERROR] Error eliminando relación: {"error":"object is not iterable (cannot read property Symbol(Symbol.iterator))","mercaderiaId":"50","proveedorId":"6"}
2025-09-09T21:23:26.024Z [ERROR] Error eliminando relación: {"error":"object is not iterable (cannot read property Symbol(Symbol.iterator))","mercaderiaId":"50","proveedorId":"18"}
2025-09-09T21:23:54.813Z [ERROR] Error eliminando relación: {"error":"object is not iterable (cannot read property Symbol(Symbol.iterator))","mercaderiaId":"50","proveedorId":"18"}
2025-09-09T21:43:37.598Z [ERROR] Error eliminando relación: {"error":"object is not iterable (cannot read property Symbol(Symbol.iterator))","mercaderiaId":"50","proveedorId":"18"}
2025-09-21T01:15:54.971Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:15:55.051Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:15:55.817Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:16:01.441Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:16:01.458Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:16:02.431Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:16:49.753Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:16:49.770Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:16:50.737Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:17:45.828Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:17:45.836Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:17:46.825Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:17:50.249Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:17:50.614Z [ERROR] Error en findWithFilters: {"message":"","code":"ECONNREFUSED"}
2025-09-21T01:17:50.617Z [ERROR] Error en index de mercaderías: {"message":"","code":"ECONNREFUSED"}
2025-09-24T15:29:58.265Z [ERROR] Error en getDashboard: {"message":"","code":"ECONNREFUSED"}
2025-09-24T15:29:58.288Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-24T15:29:59.231Z [ERROR] Error en index categorías: {"message":"","code":"ECONNREFUSED"}
2025-09-24T15:46:16.016Z [ERROR] ❌ Error validando mercaderías: {"message":"Unknown column 'm.nombre' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            SELECT \n                m.id,\n                m.nombre,\n                m.descripcion,\n                m.sku,\n                m.codigo_sku,\n                m.codigo_barras,\n                m.precio_venta,\n                m.precio_costo,\n                m.categoria_id,\n                c.nombre as categoria_nombre,\n                COALESCE(s.stock_total, 0) as stock_total\n            FROM mercaderias m\n            LEFT JOIN categorias c ON m.categoria_id = c.id\n            LEFT JOIN (\n                SELECT \n                    mercaderia_id,\n                    SUM(CASE \n                        WHEN tipo_movimiento IN ('entrada', 'compra', 'transferencia_entrada', 'ajuste_positivo') THEN cantidad \n                        WHEN tipo_movimiento IN ('salida', 'venta', 'transferencia_salida', 'ajuste_negativo') THEN -cantidad \n                        ELSE 0 \n                    END) as stock_total\n                FROM movimientos_stock \n                GROUP BY mercaderia_id\n            ) s ON m.id = s.mercaderia_id\n            WHERE m.id IN (?)\n            ORDER BY m.nombre ASC\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'm.nombre' in 'field list'"}
2025-09-24T15:53:14.049Z [ERROR] ❌ Error validando mercaderías: {"message":"Unknown column 'm.nombre' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            SELECT \n                m.id,\n                m.nombre,\n                m.descripcion,\n                m.sku,\n                m.codigo_sku,\n                m.codigo_barras,\n                m.precio_venta,\n                m.precio_costo,\n                m.categoria_id,\n                c.nombre as categoria_nombre,\n                COALESCE(s.stock_total, 0) as stock_total\n            FROM mercaderias m\n            LEFT JOIN categorias c ON m.categoria_id = c.id\n            LEFT JOIN (\n                SELECT \n                    mercaderia_id,\n                    SUM(CASE \n                        WHEN tipo_movimiento IN ('entrada', 'compra', 'transferencia_entrada', 'ajuste_positivo') THEN cantidad \n                        WHEN tipo_movimiento IN ('salida', 'venta', 'transferencia_salida', 'ajuste_negativo') THEN -cantidad \n                        ELSE 0 \n                    END) as stock_total\n                FROM movimientos_stock \n                GROUP BY mercaderia_id\n            ) s ON m.id = s.mercaderia_id\n            WHERE m.id IN (?)\n            ORDER BY m.nombre ASC\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'm.nombre' in 'field list'"}
2025-09-24T15:53:20.495Z [ERROR] ❌ Error validando mercaderías: {"message":"Unknown column 'm.nombre' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            SELECT \n                m.id,\n                m.nombre,\n                m.descripcion,\n                m.sku,\n                m.codigo_sku,\n                m.codigo_barras,\n                m.precio_venta,\n                m.precio_costo,\n                m.categoria_id,\n                c.nombre as categoria_nombre,\n                COALESCE(s.stock_total, 0) as stock_total\n            FROM mercaderias m\n            LEFT JOIN categorias c ON m.categoria_id = c.id\n            LEFT JOIN (\n                SELECT \n                    mercaderia_id,\n                    SUM(CASE \n                        WHEN tipo_movimiento IN ('entrada', 'compra', 'transferencia_entrada', 'ajuste_positivo') THEN cantidad \n                        WHEN tipo_movimiento IN ('salida', 'venta', 'transferencia_salida', 'ajuste_negativo') THEN -cantidad \n                        ELSE 0 \n                    END) as stock_total\n                FROM movimientos_stock \n                GROUP BY mercaderia_id\n            ) s ON m.id = s.mercaderia_id\n            WHERE m.id IN (?)\n            ORDER BY m.nombre ASC\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'm.nombre' in 'field list'"}
2025-09-24T16:37:14.674Z [ERROR] ❌ Error validando mercaderías: {"message":"Unknown column 'm.nombre' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            SELECT \n                m.id,\n                m.nombre,\n                m.descripcion,\n                m.sku,\n                m.codigo_sku,\n                m.codigo_barras,\n                m.precio_venta,\n                m.precio_costo,\n                m.categoria_id,\n                c.nombre as categoria_nombre,\n                COALESCE(s.stock_total, 0) as stock_total\n            FROM mercaderias m\n            LEFT JOIN categorias c ON m.categoria_id = c.id\n            LEFT JOIN (\n                SELECT \n                    mercaderia_id,\n                    SUM(CASE \n                        WHEN tipo_movimiento IN ('entrada', 'compra', 'transferencia_entrada', 'ajuste_positivo') THEN cantidad \n                        WHEN tipo_movimiento IN ('salida', 'venta', 'transferencia_salida', 'ajuste_negativo') THEN -cantidad \n                        ELSE 0 \n                    END) as stock_total\n                FROM movimientos_stock \n                GROUP BY mercaderia_id\n            ) s ON m.id = s.mercaderia_id\n            WHERE m.id IN (?)\n            ORDER BY m.nombre ASC\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'm.nombre' in 'field list'"}
2025-09-24T17:48:40.199Z [ERROR] ❌ Error validando mercaderías: {"message":"Unknown column 'm.nombre' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            SELECT \n                m.id,\n                m.nombre,\n                m.descripcion,\n                m.sku,\n                m.codigo_sku,\n                m.codigo_barras,\n                m.precio_venta,\n                m.precio_costo,\n                m.categoria_id,\n                c.nombre as categoria_nombre,\n                COALESCE(s.stock_total, 0) as stock_total\n            FROM mercaderias m\n            LEFT JOIN categorias c ON m.categoria_id = c.id\n            LEFT JOIN (\n                SELECT \n                    mercaderia_id,\n                    SUM(CASE \n                        WHEN tipo_movimiento IN ('entrada', 'compra', 'transferencia_entrada', 'ajuste_positivo') THEN cantidad \n                        WHEN tipo_movimiento IN ('salida', 'venta', 'transferencia_salida', 'ajuste_negativo') THEN -cantidad \n                        ELSE 0 \n                    END) as stock_total\n                FROM movimientos_stock \n                GROUP BY mercaderia_id\n            ) s ON m.id = s.mercaderia_id\n            WHERE m.id IN (?)\n            ORDER BY m.nombre ASC\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'm.nombre' in 'field list'"}
2025-09-24T17:55:00.476Z [ERROR] ❌ Error validando mercaderías: {"message":"Unknown column 'm.sku' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n            SELECT \n                m.id,\n                m.descripcion,\n                m.sku,\n                m.codigo_sku,\n                m.codigo_barras,\n                m.precio_venta,\n                m.precio_costo,\n                m.categoria_id,\n                c.nombre as categoria_nombre,\n                COALESCE(s.stock_total, 0) as stock_total\n            FROM mercaderias m\n            LEFT JOIN categorias c ON m.categoria_id = c.id\n            LEFT JOIN (\n                SELECT \n                    mercaderia_id,\n                    SUM(CASE \n                        WHEN tipo_movimiento IN ('entrada', 'compra', 'transferencia_entrada', 'ajuste_positivo') THEN cantidad \n                        WHEN tipo_movimiento IN ('salida', 'venta', 'transferencia_salida', 'ajuste_negativo') THEN -cantidad \n                        ELSE 0 \n                    END) as stock_total\n                FROM movimientos_stock \n                GROUP BY mercaderia_id\n            ) s ON m.id = s.mercaderia_id\n            WHERE m.id IN (?)\n            ORDER BY m.descripcion ASC\n        ","sqlState":"42S22","sqlMessage":"Unknown column 'm.sku' in 'field list'"}
2025-10-15T15:49:56.648Z [ERROR] Error creando recepción: {"message":"Unknown column 'fecha_vencimiento_documento' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                INSERT INTO recepciones_mercaderia (\n                    numero_recepcion, proveedor_id, fecha_recepcion,\n                    fecha_vencimiento_documento, numero_remito, numero_factura, \n                    total, observaciones, usuario_id, created_at, updated_at\n                ) VALUES ('REC-1760543348080', 19, '2025-10-08', NULL, NULL, '0001-000001119', 403, NULL, 1, NOW(), NOW())\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'fecha_vencimiento_documento' in 'field list'"}
2025-10-15T16:13:36.262Z [ERROR] Error creando recepción: {"message":"Unknown column 'fecha_vencimiento_documento' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                INSERT INTO recepciones_mercaderia (\n                    numero_recepcion, proveedor_id, fecha_recepcion,\n                    fecha_vencimiento_documento, numero_remito, numero_factura, \n                    total, observaciones, usuario_id, created_at, updated_at\n                ) VALUES ('REC-1760544813704', 19, '2025-10-08', '2025-10-08', NULL, '0001-00001119', 403, NULL, 1, NOW(), NOW())\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'fecha_vencimiento_documento' in 'field list'"}
2025-10-15T17:06:55.817Z [ERROR] Error creando recepción: {"message":"Unknown column 'fecha_vencimiento_documento' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                INSERT INTO recepciones_mercaderia (\n                    numero_recepcion, proveedor_id, fecha_recepcion,\n                    fecha_vencimiento_documento, numero_remito, numero_factura, \n                    total, observaciones, usuario_id, created_at, updated_at\n                ) VALUES ('REC-1760544850759', 19, '2025-10-08', '2025-10-08', NULL, '0001-00001119', 403, NULL, 1, NOW(), NOW())\n            ","sqlState":"42S22","sqlMessage":"Unknown column 'fecha_vencimiento_documento' in 'field list'"}
2025-10-15T17:07:58.611Z [ERROR] Error creando recepción: {"message":"Unknown column 'porcentaje_iva' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    INSERT INTO detalle_recepciones (\n                        recepcion_id, mercaderia_id, cantidad_recibida, \n                        precio_unitario, porcentaje_iva, iva_unitario, precio_con_iva,\n                        numero_lote, fecha_vencimiento, observaciones,\n                        created_at, updated_at\n                    ) VALUES (10, 84, 403, 1, 0, 0, 1, NULL, NULL, NULL, NOW(), NOW())\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'porcentaje_iva' in 'field list'"}
2025-10-15T17:08:13.480Z [ERROR] Error creando recepción: {"message":"Unknown column 'porcentaje_iva' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    INSERT INTO detalle_recepciones (\n                        recepcion_id, mercaderia_id, cantidad_recibida, \n                        precio_unitario, porcentaje_iva, iva_unitario, precio_con_iva,\n                        numero_lote, fecha_vencimiento, observaciones,\n                        created_at, updated_at\n                    ) VALUES (11, 84, 403, 1, 0, 0, 1, NULL, NULL, NULL, NOW(), NOW())\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'porcentaje_iva' in 'field list'"}
2025-10-15T17:11:59.053Z [ERROR] Error creando recepción: {"message":"Unknown column 'porcentaje_iva' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    INSERT INTO detalle_recepciones (\n                        recepcion_id, mercaderia_id, cantidad_recibida, \n                        precio_unitario, porcentaje_iva, iva_unitario, precio_con_iva,\n                        numero_lote, fecha_vencimiento, observaciones,\n                        created_at, updated_at\n                    ) VALUES (12, 84, 403, 1, 0, 0, 1, NULL, NULL, NULL, NOW(), NOW())\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'porcentaje_iva' in 'field list'"}
2025-10-15T17:12:41.218Z [ERROR] Error creando recepción: {"message":"Unknown column 'porcentaje_iva' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    INSERT INTO detalle_recepciones (\n                        recepcion_id, mercaderia_id, cantidad_recibida, \n                        precio_unitario, porcentaje_iva, iva_unitario, precio_con_iva,\n                        numero_lote, fecha_vencimiento, observaciones,\n                        created_at, updated_at\n                    ) VALUES (13, 84, 403, 1, 0, 0, 1, NULL, NULL, NULL, NOW(), NOW())\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'porcentaje_iva' in 'field list'"}
2025-10-15T17:13:22.424Z [ERROR] Error creando recepción: {"message":"Unknown column 'iva_unitario' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    INSERT INTO detalle_recepciones (\n                        recepcion_id, mercaderia_id, cantidad_recibida, \n                        precio_unitario, porcentaje_iva, iva_unitario, precio_con_iva,\n                        numero_lote, fecha_vencimiento, observaciones,\n                        created_at, updated_at\n                    ) VALUES (14, 84, 403, 1, 0, 0, 1, NULL, NULL, NULL, NOW(), NOW())\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'iva_unitario' in 'field list'"}
2025-10-15T17:16:45.137Z [ERROR] Error creando recepción: {"message":"Unknown column 'precio_con_iva' in 'field list'","code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"\n                    INSERT INTO detalle_recepciones (\n                        recepcion_id, mercaderia_id, cantidad_recibida, \n                        precio_unitario, porcentaje_iva, iva_unitario, precio_con_iva,\n                        numero_lote, fecha_vencimiento, observaciones,\n                        created_at, updated_at\n                    ) VALUES (15, 84, 403, 1, 0, 0, 1, NULL, NULL, NULL, NOW(), NOW())\n                ","sqlState":"42S22","sqlMessage":"Unknown column 'precio_con_iva' in 'field list'"}
